{"ast":null,"code":"var _jsxFileName = \"/home/andi/Code/cv-booklet/src/pages/Page.js\";\nimport React from 'react';\nimport Toolkit from '../utils/Toolkit';\nimport PageContent from './ContentContainer';\nimport styles from './Page.module.css';\n/**\n * Animation duration in ms\n */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ANIMATION_DURATION = 500;\nexport default class Page extends React.Component {\n  constructor(props) {\n    super(props);\n    this.frontActive = true;\n    this.ref = null;\n    this.animationActive = false;\n    this.pageNum = 0;\n    this.numSites = 0;\n    this.siteIndex = 0;\n    this.siteIndex = props.siteIndex;\n    this.numSites = props.numSites;\n    this.pageNum = this.siteIndex * 2 + 1;\n    this.ref = /*#__PURE__*/React.createRef();\n    this.frontRef = /*#__PURE__*/React.createRef();\n    this.backRef = /*#__PURE__*/React.createRef();\n  }\n\n  setFrontActive(activeState) {\n    this.frontActive = activeState;\n  }\n\n  isFrontActive() {\n    return this.frontActive;\n  }\n\n  isAnimationActive() {\n    return this.animationActive;\n  }\n\n  animate(afterAnimationFinished) {\n    const pageDom = this.ref.current;\n    let zIndex = this.siteIndex * 10,\n        keyframes1,\n        keyframes2,\n        animation;\n    keyframes1 = [2, -90];\n    keyframes2 = [-90, -182];\n\n    if (!this.isFrontActive()) {\n      keyframes1 = [-182, -90];\n      keyframes2 = [-90, 2];\n      zIndex = (this.numSites - this.siteIndex) * 10;\n    }\n\n    this.animationActive = true;\n    animation = animate.call(this, pageDom, ...keyframes1);\n    animation.addEventListener('finish', () => {\n      pageDom.style.zIndex = zIndex;\n      animation = animate.call(this, pageDom, ...keyframes2);\n      animation.addEventListener('finish', () => {\n        this.setFrontActive(!this.frontActive);\n        this.animationActive = false;\n\n        if (typeof afterAnimationFinished === 'function') {\n          afterAnimationFinished(this);\n        }\n      });\n    });\n  }\n\n  render() {\n    let inlineCSS = {\n      zIndex: (this.numSites - this.siteIndex) * 10\n    };\n\n    if (this.props.siteIndex > 0 && Toolkit.isFirefox()) {\n      inlineCSS.display = 'none';\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: inlineCSS,\n      ref: this.ref,\n      onClick: this.props.onPageClick.bind(this),\n      className: `${styles.page} ${styles['page-right']}`,\n      children: [/*#__PURE__*/_jsxDEV(PageContent, {\n        ref: this.frontRef,\n        type: \"front\",\n        pageNum: this.pageNum,\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: this.pageNum\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(PageContent, {\n        ref: this.backRef,\n        type: \"back\",\n        pageNum: this.pageNum + 1,\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: this.pageNum + 1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nfunction animate(domNode, degFrom, degTo) {\n  return domNode.animate([{\n    transform: 'rotateY(' + degFrom + 'deg)'\n  }, {\n    transform: 'rotateY(' + degTo + 'deg)'\n  }], {\n    duration: ANIMATION_DURATION,\n    fill: 'forwards'\n  });\n}","map":{"version":3,"sources":["/home/andi/Code/cv-booklet/src/pages/Page.js"],"names":["React","Toolkit","PageContent","styles","ANIMATION_DURATION","Page","Component","constructor","props","frontActive","ref","animationActive","pageNum","numSites","siteIndex","createRef","frontRef","backRef","setFrontActive","activeState","isFrontActive","isAnimationActive","animate","afterAnimationFinished","pageDom","current","zIndex","keyframes1","keyframes2","animation","call","addEventListener","style","render","inlineCSS","isFirefox","display","onPageClick","bind","page","domNode","degFrom","degTo","transform","duration","fill"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Toolkit from '../utils/Toolkit';\nimport PageContent from './ContentContainer';\n\nimport styles from './Page.module.css';\n\n/**\n * Animation duration in ms\n */\nconst ANIMATION_DURATION = 500;\n\nexport default class Page extends React.Component {\n\n    frontActive = true;\n\n    ref = null;\n\n    animationActive = false;\n\n    pageNum = 0;\n\n    numSites = 0;\n\n    siteIndex = 0;\n\n    constructor(props) {\n        super(props);\n        this.siteIndex = props.siteIndex;\n        this.numSites = props.numSites;\n        this.pageNum = this.siteIndex * 2 + 1;\n        this.ref = React.createRef();\n        this.frontRef = React.createRef();\n        this.backRef = React.createRef();\n    }\n\n    setFrontActive(activeState) {\n        this.frontActive = activeState;\n    }\n\n    isFrontActive() {\n        return this.frontActive;\n    }\n\n    isAnimationActive() {\n        return this.animationActive;\n    }\n\n    animate(afterAnimationFinished) {\n        const pageDom = this.ref.current;\n        let zIndex = this.siteIndex * 10,\n            keyframes1,\n            keyframes2,\n            animation;\n\n        keyframes1 = [2, -90];\n        keyframes2 = [-90, -182];\n        if (!this.isFrontActive()) {\n            keyframes1 = [-182, -90];\n            keyframes2 = [-90, 2];\n            zIndex = (this.numSites - this.siteIndex) * 10;\n        }\n\n        this.animationActive = true;\n        animation = animate.call(this, pageDom, ...keyframes1);\n        animation.addEventListener('finish', () => {\n            pageDom.style.zIndex = zIndex;\n            animation = animate.call(this, pageDom, ...keyframes2);\n            animation.addEventListener('finish', () => {\n                this.setFrontActive(!this.frontActive);\n\n                this.animationActive = false;\n                if (typeof afterAnimationFinished === 'function') {\n                    afterAnimationFinished(this);\n                }\n            });\n        });\n    }\n\n    render() {\n        let inlineCSS = {\n            zIndex: (this.numSites - this.siteIndex) * 10,\n        };\n\n        if (this.props.siteIndex > 0 && Toolkit.isFirefox()) {\n            inlineCSS.display = 'none';\n        }\n\n        return (\n            <div\n                style={inlineCSS}\n                ref={this.ref}\n                onClick={this.props.onPageClick.bind(this)}\n                className={`${styles.page} ${styles['page-right']}`}\n            >\n                <PageContent ref={this.frontRef} type=\"front\" pageNum={this.pageNum}>\n                    <h1>{this.pageNum}</h1>\n                </PageContent>\n                <PageContent ref={this.backRef} type=\"back\" pageNum={this.pageNum + 1}>\n                    <h1>{this.pageNum + 1}</h1>\n                </PageContent>\n            </div>\n        );\n    }\n}\n\nfunction animate(domNode, degFrom, degTo) {\n    return domNode.animate(\n        [\n            { transform: 'rotateY(' + degFrom + 'deg)' },\n            { transform: 'rotateY(' + degTo + 'deg)' },\n        ],\n        {\n            duration: ANIMATION_DURATION,\n            fill: 'forwards',\n        }\n    );\n}\n"]},"metadata":{},"sourceType":"module"}